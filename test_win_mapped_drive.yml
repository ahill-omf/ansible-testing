---
- name: Test credential and win mapped drive
  hosts: all
  gather_facts: false
  tasks:
    - name: Create a mapped drive that requires authentication
      community.windows.win_mapped_drive:
        letter: M
        path: \\corp.fin\shared
        state: present
        username: t2222009-sva@CORP.FIN
        password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30346263616632303464623730653538396335316333666538323135306238646337396132646133
          3265356161333937363631376531633230626539383034380a313863343837366435323131663761
          35306365366331346465313963613730653961353761383033653138633532623639313065373165
          6534636166373961360a303035343066313539383766353937643835323634303535616635333831
          61613839376434636330616661663639326437393961366537316432376662663132
      become: true
      become_method: runas